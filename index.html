<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>QuantumFast Pro</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
        :root {
            --black: #000; --surface: #0a0a0a; --surface2: #111; --surface3: #1a1a1a;
            --border: rgba(255,255,255,0.07); --border-light: rgba(255,255,255,0.12);
            --green: #00ff87; --amber: #f59e0b; --blue: #3b82f6; --text: #fff;
            --text2: rgba(255,255,255,0.55); --red: #ff3b30;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background: var(--black); color: var(--text); min-height: 100vh; overflow: hidden; }
        .view { display: none; height: 100vh; overflow-y: auto; padding: 70px 20px 140px; position: absolute; width: 100%; top: 0; }
        .view.active { display: block; }
        .logo { position: fixed; top: 25px; left: 20px; font-size: 16px; font-weight: 900; z-index: 1000; }
        .logo span { color: var(--green); }
        .card { background: var(--surface2); border: 1px solid var(--border); padding: 24px; border-radius: 28px; margin-bottom: 16px; position: relative; }
        .label { font-size: 10px; font-weight: 800; text-transform: uppercase; color: var(--text2); letter-spacing: 0.15em; margin-bottom: 15px; }
        .ring-wrap { position: relative; width: 220px; height: 220px; margin: 10px auto; display: flex; align-items: center; justify-content: center; }
        .ring-content { position: absolute; text-align: center; width: 100%; z-index: 5; }
        .ring-time { font-size: 40px; font-weight: 900; letter-spacing: -1.5px; font-variant-numeric: tabular-nums; line-height: 1; }
        .btn-main { background: var(--green); border: none; border-radius: 18px; color: #000; font-weight: 900; padding: 18px; width: 100%; cursor: pointer; font-size: 15px; margin-top: 10px; transition: 0.2s; text-align: center; text-decoration: none; display: block; }
        .btn-main:active { opacity: 0.8; transform: scale(0.98); }
        .btn-stop { background: var(--red); color: white; }
        .proto-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 25px 0; }
        .proto-btn { background: var(--surface3); border: 1px solid var(--border); color: var(--text2); padding: 12px 5px; border-radius: 14px; font-size: 12px; font-weight: 700; cursor: pointer; }
        .proto-btn.active { border-color: var(--green); color: var(--green); background: rgba(0,255,135,0.1); }
        .ff { display: flex; flex-direction: column; gap: 6px; margin-bottom: 15px; }
        .ff label { font-size: 10px; color: var(--text2); font-weight: 700; text-transform: uppercase; }
        .ff input, .ff select { width: 100%; background: var(--surface3); border: 1px solid var(--border); border-radius: 14px; padding: 14px; color: white; font-size: 15px; outline: none; }
        .macro-tile { padding: 18px; border-radius: 22px; background: var(--surface3); border: 1px solid var(--border); margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; max-width: 480px; left: 50%; transform: translateX(-50%); display: flex; background: rgba(5,5,5,0.95); backdrop-filter: blur(25px); border-top: 1px solid var(--border); padding: 15px 5px 40px; justify-content: space-around; z-index: 2000; }
        .nav-item { text-align: center; color: var(--text2); opacity: 0.4; font-size: 9px; font-weight: 700; cursor: pointer; width: 20%; }
        .nav-item.active { opacity: 1; color: var(--green); }
        .nav-icon { font-size: 22px; margin-bottom: 4px; display: block; }
        .rank-item { display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--surface3); border-radius: 20px; margin-bottom: 10px; border: 1px solid var(--border); }
        .rank-num { font-weight: 900; color: var(--green); font-size: 18px; width: 25px; }
        .rank-pts { margin-left: auto; font-weight: 800; }
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .product-card { background: var(--surface3); border-radius: 22px; padding: 15px; border: 1px solid var(--border); }
        .product-img { width: 100%; aspect-ratio: 1; background: #222; border-radius: 15px; margin-bottom: 10px; }
        .workout-card { background: linear-gradient(135deg, #1a1a1a, #000); border: 1px solid var(--green); padding: 20px; border-radius: 25px; margin-bottom: 15px; }
    </style>
</head>
<body>
    <div class=\"logo\">Quantum<span>Fast</span></div>

    <!-- VIEW: FAST -->
    <div id=\"view-fast\" class=\"view active\">
        <div class=\"card\">
            <div class=\"label\">Protocol _OS_</div>
            <div id=\"proto-list\" class=\"proto-grid\"></div>
            <div class=\"ring-wrap\">
                <svg width=\"220\" height=\"220\"><circle cx=\"110\" cy=\"110\" r=\"70\" fill=\"none\" stroke=\"var(--border-light)\" stroke-width=\"12\"/><circle id=\"ring-fill\" cx=\"110\" cy=\"110\" r=\"70\" fill=\"none\" stroke=\"var(--green)\" stroke-width=\"12\" stroke-dasharray=\"439.82\" stroke-dashoffset=\"439.82\" stroke-linecap=\"round\" transform=\"rotate(-90 110 110)\"/></svg>
                <div class=\"ring-content\"><div class=\"ring-time\" id=\"ring-time\">00:00:00</div></div>
            </div>
            <button class=\"btn-main\" id=\"fast-btn\" onclick=\"toggleFast()\">Start My Fast</button>
        </div>
        <div class=\"card\">
            <div class=\"label\">Daily Check-in (Community Points)</div>
            <div class=\"ff\" id=\"fast-male-only\" style=\"display:none\"><label>Did you complete your fast?</label><select id=\"check-fast\"><option value=\"no\">No</option><option value=\"yes\">Yes (+10 pts)</option></select></div>
            <div class=\"ff\"><label>Daily Challenge Water?</label><select id=\"check-water\"><option value=\"no\">No</option><option value=\"yes\">Yes (+5 pts)</option></select></div>
            <div class=\"ff\"><label>Macros Fulfilled?</label><select id=\"check-macros\"><option value=\"no\">No</option><option value=\"yes\">Yes (+5 pts)</option></select></div>
            <button class=\"btn-main\" style=\"background:var(--blue); color:white\" onclick=\"syncPoints()\">Sync Daily Points</button>
        </div>
    </div>

    <!-- VIEW: FUEL -->
    <div id=\"view-fuel\" class=\"view\">
        <div class=\"card\">
            <div class=\"label\">Nutri Fuel</div>
            <div class=\"ff\"><label id=\"w-label\">Weight (kg)</label><input type=\"number\" id=\"weight\" value=\"80\" oninput=\"calculate()\"></div>
            <div class=\"ff\"><label>Daily Goal</label><select id=\"daily-goal\" onchange=\"calculate()\"><option value=\"healthy\">Goal Healthy</option><option value=\"build\">Build</option><option value=\"define\">Define</option></select></div>
            <div class=\"ff\"><label>Activity Level</label><select id=\"activity\" onchange=\"calculate()\"><option value=\"sedentary\">Sedentary</option><option value=\"moderate\" selected>Moderate</option><option value=\"high\">High</option></select></div>
            <div class=\"macro-tile\"><span>Protein</span><b id=\"r-pro\">0g</b></div>
            <div class=\"macro-tile\"><span>Carbs</span><b id=\"r-carb\">0g</b></div>
            <div class=\"macro-tile\"><span>Fats</span><b id=\"r-fat\">0g</b></div>
            <div class=\"macro-tile\"><span>Daily Calories</span><b id=\"r-cal\">0</b></div>
        </div>
    </div>

    <!-- VIEW: COMMUNITY -->
    <div id=\"view-community\" class=\"view\">
        <div class=\"card\">
            <div class=\"label\">Community Leaderboard</div>
            <div style=\"display:flex; gap:10px; margin-bottom:20px\">
                <button class=\"proto-btn active\" onclick=\"setRankScope('weekly')\">Weekly</button>
                <button class=\"proto-btn\" onclick=\"setRankScope('monthly')\">Monthly</button>
            </div>
            <div id=\"rank-list\">
                <div class=\"rank-item\"><div class=\"rank-num\">1</div><div><b>Victor M.</b><br><small>Goal Healthy + Mod</small></div><div class=\"rank-pts\">1,240 pts</div></div>
                <div class=\"rank-item\"><div class=\"rank-num\">2</div><div><b>Alex R.</b><br><small>Build + High</small></div><div class=\"rank-pts\">1,180 pts</div></div>
            </div>
        </div>
        <div class=\"card\"><div class=\"label\">Your Circles</div><button class=\"btn-main\" style=\"font-size:12px; padding:12px\">Create New Circle +</button></div>
    </div>

    <!-- VIEW: WORKOUT -->
    <div id=\"view-workout\" class=\"view\">
        <div class=\"card\">
            <div class=\"label\">Military Challenge</div>
            <div class=\"workout-card\">
                <h3>Moderate Intensity</h3>
                <p style=\"font-size:12px; color:var(--text2); margin:10px 0\">20 Minutes - Bodyweight basics & functional flow.</p>
                <button class=\"btn-main\" style=\"background:white; color:black; font-size:13px\" onclick=\"startWorkout('mod')\">Start Session</button>
            </div>
            <div class=\"workout-card\" style=\"border-color:var(--amber)\">
                <h3>Intense Challenge</h3>
                <p style=\"font-size:12px; color:var(--text2); margin:10px 0\">30 Minutes - Military grade HIIT & endurance.</p>
                <button class=\"btn-main\" style=\"background:var(--amber); color:black; font-size:13px\" onclick=\"startWorkout('intense')\">Unleash Power</button>
            </div>
        </div>
    </div>

    <!-- VIEW: SETUP/SHOP -->
    <div id=\"view-setup\" class=\"view\">
        <div class=\"card\">
            <div class=\"label\">Quantum Shop</div>
            <div class=\"shop-grid\">
                <div class=\"product-card\"><div class=\"product-img\"></div><div style=\"font-size:12px; font-weight:800\">Marine Collagen</div><div style=\"color:var(--green); font-size:11px\">$45.00</div></div>
                <div class=\"product-card\"><div class=\"product-img\"></div><div style=\"font-size:12px; font-weight:800\">Fast Booster</div><div style=\"color:var(--green); font-size:11px\">$29.00</div></div>
            </div>
        </div>
        <div class=\"card\">
            <div class=\"label\">Profile & Sync</div>
            <div class=\"ff\"><label>Sex</label><select id=\"sex\" onchange=\"updateSexUI()\"><option value=\"male\">Male</option><option value=\"female\">Female</option></select></div>
            <button class=\"btn-main\" onclick=\"loginSim()\">Login / Sync Cloud</button>
        </div>
    </div>

    <nav class=\"bottom-nav\">
        <div class=\"nav-item active\" onclick=\"showView('fast', this)\"><span class=\"nav-icon\">‚ö°</span>Fast</div>
        <div class=\"nav-item\" onclick=\"showView('fuel', this)\"><span class=\"nav-icon\">ü•ó</span>Fuel</div>
        <div class=\"nav-item\" onclick=\"showView('community', this)\"><span class=\"nav-icon\">üë•</span>Social</div>
        <div class=\"nav-item\" onclick=\"showView('workout', this)\"><span class=\"nav-icon\">üéñÔ∏è</span>Military</div>
        <div class=\"nav-item\" onclick=\"showView('setup', this)\"><span class=\"nav-icon\">‚öôÔ∏è</span>Shop</div>
    </nav>

    <script>
        let state = { units:'metric', weight:80, hCm:181, hFt:5, hIn:11, age:40, sex:'male', goal:'healthy', activity:'moderate', fastStart:null, fastDuration:18, points:0 };
        const CIRC = 439.82;
        let timerInterval = null;

        window.onload = () => {
            const saved = localStorage.getItem('quantumState');
            if (saved) state = JSON.parse(saved);
            loadUI();
            updateSexUI();
            if (state.fastStart) {
                document.getElementById('fast-btn').textContent = \"Stop Fast\";
                document.getElementById('fast-btn').classList.add('btn-stop');
                runTimerUI();
            }
            calculate();
        };

        function showView(view, el) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById('view-' + view).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            el.classList.add('active');
        }

        function loadUI() {
            document.getElementById('sex').value = state.sex || 'male';
            document.getElementById('weight').value = state.weight;
            document.getElementById('daily-goal').value = state.goal;
            document.getElementById('activity').value = state.activity;
        }

        function updateSexUI() {
            state.sex = document.getElementById('sex').value;
            document.getElementById('fast-male-only').style.display = state.sex === 'male' ? 'block' : 'none';
            save();
        }

        function toggleFast() {
            if (state.fastStart) {
                state.fastStart = null;
                clearInterval(timerInterval);
                document.getElementById('fast-btn').textContent = \"Start My Fast\";
                document.getElementById('fast-btn').classList.remove('btn-stop');
                updateRingDisplay(0, state.fastDuration * 3600);
            } else {
                state.fastStart = Date.now();
                document.getElementById('fast-btn').textContent = \"Stop Fast\";
                document.getElementById('fast-btn').classList.add('btn-stop');
                runTimerUI();
            }
            save();
        }

        function runTimerUI() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (!state.fastStart) return;
                updateRingDisplay((Date.now() - state.fastStart) / 1000, state.fastDuration * 3600);
            }, 1000);
        }

        function updateRingDisplay(elapsed, total) {
            const ratio = Math.min(elapsed / total, 1);
            const rem = Math.max(0, total - elapsed);
            const h = Math.floor(rem / 3600);
            const m = Math.floor((rem % 3600) / 60);
            const s = Math.floor(rem % 60);
            document.getElementById('ring-time').textContent = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
            document.getElementById('ring-fill').setAttribute('stroke-dashoffset', CIRC * (1 - ratio));
        }

        function calculate() {
            state.weight = parseFloat(document.getElementById('weight').value) || 80;
            state.goal = document.getElementById('daily-goal').value;
            state.activity = document.getElementById('activity').value;
            
            let wKg = state.weight;
            const bmr = (10 * wKg) + (6.25 * 181) - (5 * state.age) + (state.sex === 'male' ? 5 : -161);
            const mults = { sedentary: 1.2, moderate: 1.55, high: 1.725 };
            let cal = bmr * mults[state.activity];
            
            if (state.goal === 'build') cal += 250;
            if (state.goal === 'define') cal -= 250;

            document.getElementById('r-cal').textContent = Math.round(cal);
            document.getElementById('r-pro').textContent = Math.round((cal * 0.3) / 4) + 'g';
            document.getElementById('r-carb').textContent = Math.round((cal * 0.45) / 4) + 'g';
            document.getElementById('r-fat').textContent = Math.round((cal * 0.25) / 9) + 'g';
            save();
        }

        function syncPoints() {
            let pts = 0;
            if (state.sex === 'male' && document.getElementById('check-fast').value === 'yes') pts += 10;
            if (document.getElementById('check-water').value === 'yes') pts += 5;
            if (document.getElementById('check-macros').value === 'yes') pts += 5;

            const multipliers = {
                'healthy_moderate': 1.4, 'healthy_high': 1.3,
                'build_high': 1.2, 'build_moderate': 1.1,
                'define_moderate': 1.0, 'define_high': 0.9,
                'sedentary': 0.7
            };

            let key = state.activity === 'sedentary' ? 'sedentary' : state.goal + '_' + state.activity;
            let mult = multipliers[key] || 1.0;
            
            let dailyTotal = Math.round(pts * mult);
            state.points += dailyTotal;
            alert(`Points Synced! +${dailyTotal} points for today. Total: ${state.points}`);
            save();
        }

        function loginSim() {
            const email = prompt(\"Enter your email to sync circles:\");
            if (email) alert(\"Login successful! Circles synced.\");
        }

        function startWorkout(type) {
            alert(`Starting Military ${type === 'mod' ? 'Moderate' : 'Intense'} session... Stay focused!`);
        }

        function save() { localStorage.setItem('quantumState', JSON.stringify(state)); }
    </script>
</body>
</html>
